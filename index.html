<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Physique Tracker</title>

<style>
body {
    font-family: -apple-system, BlinkMacSystemFont, sans-serif;
    background: #111;
    color: white;
    padding: 20px;
}
h1 {
    text-align: center;
}
.card {
    background: #1c1c1e;
    padding: 15px;
    margin-bottom: 15px;
    border-radius: 12px;
}
input, select {
    width: 100%;
    padding: 10px;
    margin-top: 5px;
    margin-bottom: 10px;
    border-radius: 8px;
    border: none;
}
button {
    width: 100%;
    padding: 12px;
    border-radius: 10px;
    border: none;
    background: #0a84ff;
    color: white;
    font-weight: bold;
    margin-bottom: 8px;
}
.entry {
    font-size: 14px;
    margin-bottom: 6px;
    opacity: 0.9;
}
.small-btn {
    background: #2c2c2e;
}
</style>
</head>

<body>

<h1>Physique Tracker</h1>

<div class="card">
<button onclick="showScreen('checkin')">Check-In</button>
<button onclick="showScreen('workout')" class="small-btn">Workout Log</button>
</div>

<!-- PHASE CONTROL -->
<div class="card">
<h3>Current Phase: <span id="phaseDisplay"></span></h3>
<button onclick="togglePhase()">Toggle Phase</button>
</div>

<!-- CHECK-IN SCREEN -->
<div id="checkinScreen">

<div class="card">

<label>Weight (kg)</label>
<input type="number" id="weight">

<label>Waist (cm)</label>
<input type="number" id="waist">

<label>Strength (1–5)</label>
<select id="strength">
<option>1</option><option>2</option><option>3</option><option>4</option><option>5</option>
</select>

<label>Recovery (1–5)</label>
<select id="recovery">
<option>1</option><option>2</option><option>3</option><option>4</option><option>5</option>
</select>

<label>Adherence (1–5)</label>
<select id="adherence">
<option>1</option><option>2</option><option>3</option><option>4</option><option>5</option>
</select>

<button onclick="saveCheckin()">Save Check-In</button>

<div id="decision"></div>

</div>

<div class="card">
<h3>Check-In History</h3>
<div id="history"></div>
</div>

</div>

<!-- WORKOUT SCREEN -->
<div id="workoutScreen" style="display:none;">

<div class="card">
<h3>Log Workout</h3>

<label>Exercise</label>
<input type="text" id="exercise">

<label>Weight (kg)</label>
<input type="number" id="liftWeight">

<label>Reps</label>
<input type="number" id="reps">

<label>RIR</label>
<input type="number" id="rir">

<button onclick="saveWorkout()">Save Workout</button>

</div>

<div class="card">
<h3>Workout History</h3>
<div id="workoutHistory"></div>
</div>

</div>

<script>

let phase = localStorage.getItem("phase") || "Cut";

function togglePhase() {
    phase = phase === "Cut" ? "Bulk" : "Cut";
    localStorage.setItem("phase", phase);
    document.getElementById("phaseDisplay").innerText = phase;
}

function showScreen(screen) {
    document.getElementById("checkinScreen").style.display =
        screen === "checkin" ? "block" : "none";

    document.getElementById("workoutScreen").style.display =
        screen === "workout" ? "block" : "none";
}

function saveCheckin() {

    let weight = document.getElementById("weight").value;
    let waist = document.getElementById("waist").value;
    let strength = parseInt(document.getElementById("strength").value);
    let recovery = parseInt(document.getElementById("recovery").value);
    let adherence = parseInt(document.getElementById("adherence").value);

    let total = strength + recovery + adherence;
    let decision = "";

    if (phase === "Cut") {
        if (total >= 13) decision = "Perfect – Maintain Deficit";
        else if (total >= 10) decision = "Slight Adjustment (-100 kcal)";
        else decision = "Increase Deficit (-200 kcal)";
    } else {
        if (total >= 13) decision = "Perfect – Maintain Surplus";
        else if (total >= 10) decision = "Small Increase (+100 kcal)";
        else decision = "Reduce Surplus (-100 kcal)";
    }

    let entry = {
        date: new Date().toLocaleDateString(),
        weight,
        waist,
        total,
        decision,
        phase
    };

    let data = JSON.parse(localStorage.getItem("physiqueData")) || [];
    data.unshift(entry);
    localStorage.setItem("physiqueData", JSON.stringify(data));

    document.getElementById("decision").innerHTML =
        "<strong>Phase:</strong> " + phase +
        "<br><strong>Total Score:</strong> " + total +
        "<br><strong>Decision:</strong> " + decision;

    renderHistory();
}

function renderHistory() {
    let data = JSON.parse(localStorage.getItem("physiqueData")) || [];
    let historyDiv = document.getElementById("history");
    historyDiv.innerHTML = "";

    data.forEach(entry => {
        historyDiv.innerHTML +=
            "<div class='entry'>" +
            entry.date + " | " +
            entry.phase + " | " +
            entry.weight + "kg | Score: " +
            entry.total +
            "</div>";
    });

    document.getElementById("phaseDisplay").innerText = phase;
}

function saveWorkout() {

    let exercise = document.getElementById("exercise").value;
    let weight = document.getElementById("liftWeight").value;
    let reps = document.getElementById("reps").value;
    let rir = document.getElementById("rir").value;

    let entry = {
        date: new Date().toLocaleDateString(),
        exercise,
        weight,
        reps,
        rir
    };

    let workouts = JSON.parse(localStorage.getItem("workoutData")) || [];
    workouts.unshift(entry);
    localStorage.setItem("workoutData", JSON.stringify(workouts));

    renderWorkouts();
}

function renderWorkouts() {
    let workouts = JSON.parse(localStorage.getItem("workoutData")) || [];
    let container = document.getElementById("workoutHistory");
    container.innerHTML = "";

    workouts.forEach(w => {
        container.innerHTML +=
            "<div class='entry'>" +
            w.date + " | " +
            w.exercise + " | " +
            w.weight + "kg x " +
            w.reps + " (RIR " +
            w.rir + ")" +
            "</div>";
    });
}

renderHistory();
renderWorkouts();

</script>

</body>
</html>
